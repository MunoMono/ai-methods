version: '3.9'

services:
  # DDR Public Frontend (innovationdesign.io)
  ddr-public:
    build:
      context: .
      dockerfile: ddr-public/Dockerfile
      args:
        - VITE_AUTH0_DOMAIN=${VITE_AUTH0_DOMAIN:-dev-i4m880asz7y6j5sk.us.auth0.com}
        - VITE_AUTH0_CLIENT_ID=${VITE_AUTH0_CLIENT_ID:-1tKb110HavDT3KsqC5P894JEOZ3fQXMm}
        - VITE_AUTH0_AUDIENCE=${VITE_AUTH0_AUDIENCE:-https://api.ddrarchive.org}
        - VITE_AUTH0_REDIRECT_URI=${VITE_AUTH0_REDIRECT_URI:-https://innovationdesign.io}
        - VITE_DDR_ENV=production
        - VITE_GRAPHQL_ENDPOINT=${VITE_GRAPHQL_ENDPOINT:-https://ddrarchive.org/graphql}
    container_name: innovationdesign-frontend
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./ssl:/etc/nginx/ssl:ro
    networks:
      - web

networks:
  web:
    driver: bridge

volumes:
  ssl:
